let ladderHeight = 10;
let players = [];
let resultsList = [];

function createLadder() {
  const playerInput = document.getElementById("playersInput").value;
  const resultInput = document.getElementById("resultsInput").value;

  players = playerInput.split(',').map(name => name.trim()).filter(name => name !== "");
  resultsList = resultInput.split(',').map(r => r.trim()).filter(r => r !== "");

  if (players.length < 2 || resultsList.length < 2) {
    alert("ì°¸ê°€ìžì™€ ê²°ê³¼ëŠ” ê°ê° ìµœì†Œ 2ê°œ ì´ìƒ ìž…ë ¥í•´ ì£¼ì„¸ìš”.");
    return;
  }

  if (players.length !== resultsList.length) {
    alert("ì°¸ê°€ìž ìˆ˜ì™€ ê²°ê³¼ ìˆ˜ëŠ” ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.");
    return;
  }

  const container = document.getElementById("ladderContainer");
  container.innerHTML = "";

  for (let i = 0; i < players.length; i++) {
    const col = document.createElement("div");
    col.className = "column";
    col.dataset.player = players[i];

    const label = document.createElement("div");
    label.textContent = players[i];
    label.style.marginBottom = "5px";
    col.appendChild(label);

    for (let j = 0; j < ladderHeight; j++) {
      const step = document.createElement("div");
      step.className = "step";
      col.appendChild(step);
    }

    container.appendChild(col);
  }

  for (let j = 0; j < ladderHeight; j++) {
    const rand = Math.floor(Math.random() * (players.length - 1));
    const col = container.children[rand];
    const step = col.children[j + 1];
    const horizontal = document.createElement("div");
    horizontal.className = "step horizontal";
    step.appendChild(horizontal);
  }

  document.getElementById("results").innerHTML = "";
  document.getElementById("resultsTitle").textContent = "";
}

function startGame() {
  if (players.length === 0 || resultsList.length === 0) {
    alert("ë¨¼ì € ì‚¬ë‹¤ë¦¬ë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”!");
    return;
  }

  const shuffledResults = [...resultsList].sort(() => Math.random() - 0.5);

  const resultBox = document.getElementById("results");
  resultBox.innerHTML = "";

  players.forEach((player, index) => {
    const div = document.createElement("div");
    div.textContent = `${player} â†’ ${shuffledResults[index]}`;
    resultBox.appendChild(div);
  });

  document.getElementById("resultsTitle").textContent = "ðŸ”» ê²°ê³¼:";
}
